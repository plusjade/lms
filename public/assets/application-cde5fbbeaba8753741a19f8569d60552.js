function debounce(t,e,s){var n;return function(){var i=this,o=arguments,r=function(){n=null,s||t.apply(i,o)},a=s&&!n;clearTimeout(n),n=setTimeout(r,e),a&&t.apply(i,o)}}function autosaveStatusIcon(t){var e=["autosave"],s=[];return"ok"===t?(s.push(React.DOM.svg({viewBox:"0 0 16 16"},React.DOM.path({d:"M8 0c-4.418 0-8 3.582-8 8s3.582 8 8 8 8-3.582 8-8-3.582-8-8-8zm3 4.594l1.406 1.406-5.406 5.406-3.406-3.406 1.406-1.406 2 2 4-4z"}))),s.push("saved!")):(e.push("error"),s.push(React.DOM.svg({viewBox:"0 0 100 100"},React.DOM.path({d:"M96.285,87.674L54.799,15.818c-2.718-4.709-7.167-4.709-9.886,0L3.427,87.674c-2.718,4.71-0.494,8.562,4.944,8.562h82.972   C96.779,96.236,99.004,92.384,96.285,87.674z M49.98,83.335h-0.062c-2.667,0-4.652-1.983-4.652-4.899   c0-2.79,1.985-4.837,4.714-4.837c2.729,0,4.714,2.047,4.714,4.837C54.694,81.352,52.709,83.335,49.98,83.335z M54.322,48.544   c-1.178,6.636-2.109,13.334-3.039,20.465c-0.186,0.744-2.729,0.808-2.854,0c-0.929-7.131-1.921-13.829-3.101-20.465   c-0.372-2.356-0.558-3.474-0.558-4.527c0-1.489,1.055-2.667,5.086-2.667h0.061c3.846,0,5.024,1.178,5.024,2.667   C54.942,45.07,54.694,46.188,54.322,48.544z"}))),s.push("There was a problem!")),React.DOM.div({key:Math.random().toPrecision(4),className:e.join(" ")},s)}!function(t){function e(t,e,s,n){var i,o=0,r=0,a=0,s=(s||"(").toString(),n=(n||")").toString();for(i=0;i<t.length;i++){var h=t[i];if(h.indexOf(s,o)>h.indexOf(n,o)||~h.indexOf(s,o)&&!~h.indexOf(n,o)||!~h.indexOf(s,o)&&~h.indexOf(n,o)){if(r=h.indexOf(s,o),a=h.indexOf(n,o),~r&&!~a||!~r&&~a){var c=t.slice(0,(i||1)+1).join(e);t=[c].concat(t.slice((i||1)+1))}o=(a>r?a:r)+1,i=0}else o=0}return t}function n(t,e){for(var s,n=0,o="";s=t.substr(n).match(/[^\w\d\- %@&]*\*[^\w\d\- %@&]*/);)n=s.index+s[0].length,s[0]=s[0].replace(/^\*/,"([_.()!\\ %@&a-zA-Z0-9-]+)"),o+=t.substr(0,s.index)+s[0];t=o+=t.substr(n);var r,a,h=t.match(/:([^\/]+)/gi);if(h){a=h.length;for(var c=0;a>c;c++)r=h[c],t="::"===r.slice(0,2)?r.slice(1):t.replace(r,i(r,e))}return t}function i(t,e,s){s=t;for(var n in e)if(e.hasOwnProperty(n)&&(s=e[n](t),s!==t))break;return s===t?"([._a-zA-Z0-9-%()]+)":s}function o(t,e,s){if(!t.length)return s();var n=0;!function i(){e(t[n],function(e){e||e===!1?(s(e),s=function(){}):(n+=1,n===t.length?s():i())})}()}function r(t){for(var e=[],s=0,n=t.length;n>s;s++)e=e.concat(t[s]);return e}function a(t,e){for(var s=0;s<t.length;s+=1)if(e(t[s],s,t)===!1)return}function h(){return""===c.hash||"#"===c.hash}var c=document.location,p={mode:"modern",hash:c.hash,history:!1,check:function(){var t=c.hash;t!=this.hash&&(this.hash=t,this.onHashChanged())},fire:function(){"modern"===this.mode?this.history===!0?window.onpopstate():window.onhashchange():this.onHashChanged()},init:function(t,e){function s(t){for(var e=0,s=l.listeners.length;s>e;e++)l.listeners[e](t)}var n=this;if(this.history=e,l.listeners||(l.listeners=[]),"onhashchange"in window&&(void 0===document.documentMode||document.documentMode>7))this.history===!0?setTimeout(function(){window.onpopstate=s},500):window.onhashchange=s,this.mode="modern";else{var i=document.createElement("iframe");i.id="state-frame",i.style.display="none",document.body.appendChild(i),this.writeFrame(""),"onpropertychange"in document&&"attachEvent"in document&&document.attachEvent("onpropertychange",function(){"location"===event.propertyName&&n.check()}),window.setInterval(function(){n.check()},50),this.onHashChanged=s,this.mode="legacy"}return l.listeners.push(t),this.mode},destroy:function(t){if(l&&l.listeners)for(var e=l.listeners,s=e.length-1;s>=0;s--)e[s]===t&&e.splice(s,1)},setHash:function(t){return"legacy"===this.mode&&this.writeFrame(t),this.history===!0?(window.history.pushState({},document.title,t),this.fire()):c.hash="/"===t[0]?t:"/"+t,this},writeFrame:function(t){var e=document.getElementById("state-frame"),s=e.contentDocument||e.contentWindow.document;s.open(),s.write("<script>_hash = '"+t+"'; onload = parent.listener.syncHash;<script>"),s.close()},syncHash:function(){var t=this._hash;return t!=c.hash&&(c.hash=t),this},onHashChanged:function(){}},l=t.Router=function(t){return this instanceof l?(this.params={},this.routes={},this.methods=["on","once","after","before"],this.scope=[],this._methods={},this._insert=this.insert,this.insert=this.insertEx,this.historySupport=null!=(null!=window.history?window.history.pushState:null),this.configure(),this.mount(t||{}),void 0):new l(t)};l.prototype.init=function(t){var e,s=this;return this.handler=function(t){var e=t&&t.newURL||window.location.hash,n=s.history===!0?s.getPath():e.replace(/.*#/,"");s.dispatch("on","/"===n.charAt(0)?n:"/"+n)},p.init(this.handler,this.history),this.history===!1?h()&&t?c.hash=t:h()||s.dispatch("on","/"+c.hash.replace(/^(#\/|#|\/)/,"")):(this.convert_hash_in_init?(e=h()&&t?t:h()?null:c.hash.replace(/^#/,""),e&&window.history.replaceState({},document.title,e)):e=this.getPath(),(e||this.run_in_init===!0)&&this.handler()),this},l.prototype.explode=function(){var t=this.history===!0?this.getPath():c.hash;return"/"===t.charAt(1)&&(t=t.slice(1)),t.slice(1,t.length).split("/")},l.prototype.setRoute=function(t,e,n){var i=this.explode();return"number"==typeof t&&"string"==typeof e?i[t]=e:"string"==typeof n?i.splice(t,e,s):i=[t],p.setHash(i.join("/")),i},l.prototype.insertEx=function(t,e,s,n){return"once"===t&&(t="on",s=function(t){var e=!1;return function(){return e?void 0:(e=!0,t.apply(this,arguments))}}(s)),this._insert(t,e,s,n)},l.prototype.getRoute=function(t){var e=t;if("number"==typeof t)e=this.explode()[t];else if("string"==typeof t){var s=this.explode();e=s.indexOf(t)}else e=this.explode();return e},l.prototype.destroy=function(){return p.destroy(this.handler),this},l.prototype.getPath=function(){var t=window.location.pathname;return"/"!==t.substr(0,1)&&(t="/"+t),t};var u=/\?.*/;l.prototype.configure=function(t){t=t||{};for(var e=0;e<this.methods.length;e++)this._methods[this.methods[e]]=!0;return this.recurse=t.recurse||this.recurse||!1,this.async=t.async||!1,this.delimiter=t.delimiter||"/",this.strict="undefined"==typeof t.strict?!0:t.strict,this.notfound=t.notfound,this.resource=t.resource,this.history=t.html5history&&this.historySupport||!1,this.run_in_init=this.history===!0&&t.run_handler_in_init!==!1,this.convert_hash_in_init=this.history===!0&&t.convert_hash_in_init!==!1,this.every={after:t.after||null,before:t.before||null,on:t.on||null},this},l.prototype.param=function(t,e){":"!==t[0]&&(t=":"+t);var s=new RegExp(t,"g");return this.params[t]=function(t){return t.replace(s,e.source||e)},this},l.prototype.on=l.prototype.route=function(t,s,n){var i=this;return!n&&"function"==typeof s&&(n=s,s=t,t="on"),Array.isArray(s)?s.forEach(function(e){i.on(t,e,n)}):(s.source&&(s=s.source.replace(/\\\//gi,"/")),Array.isArray(t)?t.forEach(function(t){i.on(t.toLowerCase(),s,n)}):(s=s.split(new RegExp(this.delimiter)),s=e(s,this.delimiter),this.insert(t,this.scope.concat(s),n),void 0))},l.prototype.path=function(t,s){var n=this.scope.length;t.source&&(t=t.source.replace(/\\\//gi,"/")),t=t.split(new RegExp(this.delimiter)),t=e(t,this.delimiter),this.scope=this.scope.concat(t),s.call(this,this),this.scope.splice(n,t.length)},l.prototype.dispatch=function(t,e,s){function n(){o.last=r.after,o.invoke(o.runlist(r),o,s)}var i,o=this,r=this.traverse(t,e.replace(u,""),this.routes,""),a=this._invoked;return this._invoked=!0,r&&0!==r.length?("forward"===this.recurse&&(r=r.reverse()),i=this.every&&this.every.after?[this.every.after].concat(this.last):[this.last],i&&i.length>0&&a?(this.async?this.invoke(i,this,n):(this.invoke(i,this),n()),!0):(n(),!0)):(this.last=[],"function"==typeof this.notfound&&this.invoke([this.notfound],{method:t,path:e},s),!1)},l.prototype.invoke=function(t,e,s){var n,i=this;this.async?(n=function(s,i){return Array.isArray(s)?o(s,n,i):void("function"==typeof s&&s.apply(e,(t.captures||[]).concat(i)))},o(t,n,function(){s&&s.apply(e,arguments)})):(n=function(s){return Array.isArray(s)?a(s,n):"function"==typeof s?s.apply(e,t.captures||[]):void("string"==typeof s&&i.resource&&i.resource[s].apply(e,t.captures||[]))},a(t,n))},l.prototype.traverse=function(t,e,s,n,i){function o(t){function e(t){for(var s=t.length-1;s>=0;s--)Array.isArray(t[s])?(e(t[s]),0===t[s].length&&t.splice(s,1)):i(t[s])||t.splice(s,1)}function s(t){for(var e=[],n=0;n<t.length;n++)e[n]=Array.isArray(t[n])?s(t[n]):t[n];return e}if(!i)return t;var n=s(t);return n.matched=t.matched,n.captures=t.captures,n.after=t.after.filter(i),e(n),n}var r,a,h,c,p=[];if(e===this.delimiter&&s[t])return c=[[s.before,s[t]].filter(Boolean)],c.after=[s.after].filter(Boolean),c.matched=!0,c.captures=[],o(c);for(var l in s)if(s.hasOwnProperty(l)&&(!this._methods[l]||this._methods[l]&&"object"==typeof s[l]&&!Array.isArray(s[l]))){if(r=a=n+this.delimiter+l,this.strict||(a+="["+this.delimiter+"]?"),h=e.match(new RegExp("^"+a)),!h)continue;if(h[0]&&h[0]==e&&s[l][t])return c=[[s[l].before,s[l][t]].filter(Boolean)],c.after=[s[l].after].filter(Boolean),c.matched=!0,c.captures=h.slice(1),this.recurse&&s===this.routes&&(c.push([s.before,s.on].filter(Boolean)),c.after=c.after.concat([s.after].filter(Boolean))),o(c);if(c=this.traverse(t,e,s[l],r),c.matched)return c.length>0&&(p=p.concat(c)),this.recurse&&(p.push([s[l].before,s[l].on].filter(Boolean)),c.after=c.after.concat([s[l].after].filter(Boolean)),s===this.routes&&(p.push([s.before,s.on].filter(Boolean)),c.after=c.after.concat([s.after].filter(Boolean)))),p.matched=!0,p.captures=c.captures,p.after=c.after,o(p)}return!1},l.prototype.insert=function(t,e,s,i){var o,r,a,h,c;if(e=e.filter(function(t){return t&&t.length>0}),i=i||this.routes,c=e.shift(),/\:|\*/.test(c)&&!/\\d|\\w/.test(c)&&(c=n(c,this.params)),e.length>0)return i[c]=i[c]||{},this.insert(t,e,s,i[c]);if(c||e.length||i!==this.routes){if(r=typeof i[c],a=Array.isArray(i[c]),i[c]&&!a&&"object"==r)switch(o=typeof i[c][t]){case"function":return void(i[c][t]=[i[c][t],s]);case"object":return void i[c][t].push(s);case"undefined":return void(i[c][t]=s)}else if("undefined"==r)return h={},h[t]=s,i[c]=h,void 0;throw new Error("Invalid route context: "+r)}switch(o=typeof i[t]){case"function":return void(i[t]=[i[t],s]);case"object":return void i[t].push(s);case"undefined":return void(i[t]=s)}},l.prototype.extend=function(t){function e(t){n._methods[t]=!0,n[t]=function(){var e=1===arguments.length?[t,""]:[t];n.on.apply(n,e.concat(Array.prototype.slice.call(arguments)))}}var s,n=this,i=t.length;for(s=0;i>s;s++)e(t[s])},l.prototype.runlist=function(t){var e=this.every&&this.every.before?[this.every.before].concat(r(t)):r(t);return this.every&&this.every.on&&e.push(this.every.on),e.captures=t.captures,e.source=t.source,e},l.prototype.mount=function(t,s){function n(s,n){var o=s,r=s.split(i.delimiter),a=typeof t[s],h=""===r[0]||!i._methods[r[0]],c=h?"on":o;h&&(o=o.slice((o.match(new RegExp("^"+i.delimiter))||[""])[0].length),r.shift()),h&&"object"===a&&!Array.isArray(t[s])?(n=n.concat(r),i.mount(t[s],n)):(h&&(n=n.concat(o.split(i.delimiter)),n=e(n,i.delimiter)),i.insert(c,n,t[s]))}if(t&&"object"==typeof t&&!Array.isArray(t)){var i=this;s=s||[],Array.isArray(s)||(s=s.split(i.delimiter));for(var o in t)t.hasOwnProperty(o)&&n(o,s.slice(0))}}}("object"==typeof exports?exports:window),function(){"use strict";function t(){}function e(t,e){for(var s=t.length;s--;)if(t[s].listener===e)return s;return-1}function s(t){return function(){return this[t].apply(this,arguments)}}var n=t.prototype,i=this,o=i.EventEmitter;n.getListeners=function(t){var e,s,n=this._getEvents();if(t instanceof RegExp){e={};for(s in n)n.hasOwnProperty(s)&&t.test(s)&&(e[s]=n[s])}else e=n[t]||(n[t]=[]);return e},n.flattenListeners=function(t){var e,s=[];for(e=0;e<t.length;e+=1)s.push(t[e].listener);return s},n.getListenersAsObject=function(t){var e,s=this.getListeners(t);return s instanceof Array&&(e={},e[t]=s),e||s},n.addListener=function(t,s){var n,i=this.getListenersAsObject(t),o="object"==typeof s;for(n in i)i.hasOwnProperty(n)&&-1===e(i[n],s)&&i[n].push(o?s:{listener:s,once:!1});return this},n.on=s("addListener"),n.addOnceListener=function(t,e){return this.addListener(t,{listener:e,once:!0})},n.once=s("addOnceListener"),n.defineEvent=function(t){return this.getListeners(t),this},n.defineEvents=function(t){for(var e=0;e<t.length;e+=1)this.defineEvent(t[e]);return this},n.removeListener=function(t,s){var n,i,o=this.getListenersAsObject(t);for(i in o)o.hasOwnProperty(i)&&(n=e(o[i],s),-1!==n&&o[i].splice(n,1));return this},n.off=s("removeListener"),n.addListeners=function(t,e){return this.manipulateListeners(!1,t,e)},n.removeListeners=function(t,e){return this.manipulateListeners(!0,t,e)},n.manipulateListeners=function(t,e,s){var n,i,o=t?this.removeListener:this.addListener,r=t?this.removeListeners:this.addListeners;if("object"!=typeof e||e instanceof RegExp)for(n=s.length;n--;)o.call(this,e,s[n]);else for(n in e)e.hasOwnProperty(n)&&(i=e[n])&&("function"==typeof i?o.call(this,n,i):r.call(this,n,i));return this},n.removeEvent=function(t){var e,s=typeof t,n=this._getEvents();if("string"===s)delete n[t];else if(t instanceof RegExp)for(e in n)n.hasOwnProperty(e)&&t.test(e)&&delete n[e];else delete this._events;return this},n.removeAllListeners=s("removeEvent"),n.emitEvent=function(t,e){var s,n,i,o,r=this.getListenersAsObject(t);for(i in r)if(r.hasOwnProperty(i))for(n=r[i].length;n--;)s=r[i][n],s.once===!0&&this.removeListener(t,s.listener),o=s.listener.apply(this,e||[]),o===this._getOnceReturnValue()&&this.removeListener(t,s.listener);return this},n.trigger=s("emitEvent"),n.emit=function(t){var e=Array.prototype.slice.call(arguments,1);return this.emitEvent(t,e)},n.setOnceReturnValue=function(t){return this._onceReturnValue=t,this},n._getOnceReturnValue=function(){return this.hasOwnProperty("_onceReturnValue")?this._onceReturnValue:!0},n._getEvents=function(){return this._events||(this._events={})},t.noConflict=function(){return i.EventEmitter=o,t},"function"==typeof define&&define.amd?define(function(){return t}):"object"==typeof module&&module.exports?module.exports=t:i.EventEmitter=t}.call(this),window.Modernizr=function(t,e,s){function n(t){v.cssText=t}function i(t,e){return typeof t===e}function o(t,e){return!!~(""+t).indexOf(e)}function r(t,e){for(var n in t){var i=t[n];if(!o(i,"-")&&v[i]!==s)return"pfx"==e?i:!0}return!1}function a(t,e,n){for(var o in t){var r=e[t[o]];if(r!==s)return n===!1?t[o]:i(r,"function")?r.bind(n||e):r}return!1}function h(t,e,s){var n=t.charAt(0).toUpperCase()+t.slice(1),o=(t+" "+b.join(n+" ")+n).split(" ");return i(e,"string")||i(e,"undefined")?r(o,e):(o=(t+" "+w.join(n+" ")+n).split(" "),a(o,e,s))}var c,p,l,u="2.8.3",d={},f=e.documentElement,m="modernizr",g=e.createElement(m),v=g.style,y=({}.toString,"Webkit Moz O ms"),b=y.split(" "),w=y.toLowerCase().split(" "),O={},R=[],M=R.slice,_={}.hasOwnProperty;l=i(_,"undefined")||i(_.call,"undefined")?function(t,e){return e in t&&i(t.constructor.prototype[e],"undefined")}:function(t,e){return _.call(t,e)},Function.prototype.bind||(Function.prototype.bind=function(t){var e=this;if("function"!=typeof e)throw new TypeError;var s=M.call(arguments,1),n=function(){if(this instanceof n){var i=function(){};i.prototype=e.prototype;var o=new i,r=e.apply(o,s.concat(M.call(arguments)));return Object(r)===r?r:o}return e.apply(t,s.concat(M.call(arguments)))};return n}),O.cssanimations=function(){return h("animationName")};for(var T in O)l(O,T)&&(p=T.toLowerCase(),d[p]=O[T](),R.push((d[p]?"":"no-")+p));return d.addTest=function(t,e){if("object"==typeof t)for(var n in t)l(t,n)&&d.addTest(n,t[n]);else{if(t=t.toLowerCase(),d[t]!==s)return d;e="function"==typeof e?e():e,"undefined"!=typeof enableClasses&&enableClasses&&(f.className+=" "+(e?"":"no-")+t),d[t]=e}return d},n(""),g=c=null,d._version=u,d._domPrefixes=w,d._cssomPrefixes=b,d.testProp=function(t){return r([t])},d.testAllProps=h,d}(this,this.document);var Opentip,firstAdapter,i,mouseMoved,mousePosition,mousePositionObservers,position,vendors,_i,_len,_ref,__slice=[].slice,__indexOf=[].indexOf||function(t){for(var e=0,s=this.length;s>e;e++)if(e in this&&this[e]===t)return e;return-1},__hasProp={}.hasOwnProperty;for(Opentip=function(){function t(e,s,n,i){var o,r,a,h,c,p,l,u,d,f,m,g,v,y,b=this;if(this.id=++t.lastId,this.debug("Creating Opentip."),t.tips.push(this),this.adapter=t.adapter,o=this.adapter.data(e,"opentips")||[],o.push(this),this.adapter.data(e,"opentips",o),this.triggerElement=this.adapter.wrap(e),this.triggerElement.length>1)throw new Error("You can't call Opentip on multiple elements.");if(this.triggerElement.length<1)throw new Error("Invalid element.");for(this.loaded=!1,this.loading=!1,this.visible=!1,this.waitingToShow=!1,this.waitingToHide=!1,this.currentPosition={left:0,top:0},this.dimensions={width:100,height:50},this.content="",this.redraw=!0,this.currentObservers={showing:!1,visible:!1,hiding:!1,hidden:!1},i=this.adapter.clone(i),"object"==typeof s?(i=s,s=n=void 0):"object"==typeof n&&(i=n,n=void 0),null!=n&&(i.title=n),null!=s&&this.setContent(s),null==i["extends"]&&(i["extends"]=null!=i.style?i.style:t.defaultStyle),h=[i],y=i;y["extends"];){if(p=y["extends"],y=t.styles[p],null==y)throw new Error("Invalid style: "+p);h.unshift(y),null==y["extends"]&&"standard"!==p&&(y["extends"]="standard")}for(i=(m=this.adapter).extend.apply(m,[{}].concat(__slice.call(h))),i.hideTriggers=function(){var t,e,s,n;for(s=i.hideTriggers,n=[],t=0,e=s.length;e>t;t++)r=s[t],n.push(r);return n}(),i.hideTrigger&&0===i.hideTriggers.length&&i.hideTriggers.push(i.hideTrigger),g=["tipJoint","targetJoint","stem"],l=0,d=g.length;d>l;l++)c=g[l],i[c]&&"string"==typeof i[c]&&(i[c]=new t.Joint(i[c]));for(!i.ajax||i.ajax!==!0&&i.ajax||(i.ajax="A"===this.adapter.tagName(this.triggerElement)?this.adapter.attr(this.triggerElement,"href"):!1),"click"===i.showOn&&"A"===this.adapter.tagName(this.triggerElement)&&this.adapter.observe(this.triggerElement,"click",function(t){return t.preventDefault(),t.stopPropagation(),t.stopped=!0}),i.target&&(i.fixed=!0),i.stem===!0&&(i.stem=new t.Joint(i.tipJoint)),i.target===!0?i.target=this.triggerElement:i.target&&(i.target=this.adapter.wrap(i.target)),this.currentStem=i.stem,null==i.delay&&(i.delay="mouseover"===i.showOn?.2:0),null==i.targetJoint&&(i.targetJoint=new t.Joint(i.tipJoint).flip()),this.showTriggers=[],this.showTriggersWhenVisible=[],this.hideTriggers=[],i.showOn&&"creation"!==i.showOn&&this.showTriggers.push({element:this.triggerElement,event:i.showOn}),null!=i.ajaxCache&&(i.cache=i.ajaxCache,delete i.ajaxCache),this.options=i,this.bound={},v=["prepareToShow","prepareToHide","show","hide","reposition"],u=0,f=v.length;f>u;u++)a=v[u],this.bound[a]=function(t){return function(){return b[t].apply(b,arguments)}}(a);this.adapter.domReady(function(){return b.activate(),"creation"===b.options.showOn?b.prepareToShow():void 0})}return t.prototype.STICKS_OUT_TOP=1,t.prototype.STICKS_OUT_BOTTOM=2,t.prototype.STICKS_OUT_LEFT=1,t.prototype.STICKS_OUT_RIGHT=2,t.prototype["class"]={container:"opentip-container",opentip:"opentip",header:"ot-header",content:"ot-content",loadingIndicator:"ot-loading-indicator",close:"ot-close",goingToHide:"ot-going-to-hide",hidden:"ot-hidden",hiding:"ot-hiding",goingToShow:"ot-going-to-show",showing:"ot-showing",visible:"ot-visible",loading:"ot-loading",ajaxError:"ot-ajax-error",fixed:"ot-fixed",showEffectPrefix:"ot-show-effect-",hideEffectPrefix:"ot-hide-effect-",stylePrefix:"style-"},t.prototype._setup=function(){var t,e,s,n,i,o,r,a,h,c,p;for(this.debug("Setting up the tooltip."),this._buildContainer(),this.hideTriggers=[],h=this.options.hideTriggers,n=i=0,r=h.length;r>i;n=++i){if(e=h[n],s=null,t=this.options.hideOn instanceof Array?this.options.hideOn[n]:this.options.hideOn,"string"==typeof e)switch(e){case"trigger":t=t||"mouseout",s=this.triggerElement;break;case"tip":t=t||"mouseover",s=this.container;break;case"target":t=t||"mouseover",s=this.options.target;break;case"closeButton":break;default:throw new Error("Unknown hide trigger: "+e+".")}else t=t||"mouseover",s=this.adapter.wrap(e);s&&this.hideTriggers.push({element:s,event:t,original:e})}for(c=this.hideTriggers,p=[],o=0,a=c.length;a>o;o++)e=c[o],p.push(this.showTriggersWhenVisible.push({element:e.element,event:"mouseover"}));return p},t.prototype._buildContainer=function(){return this.container=this.adapter.create('<div id="opentip-'+this.id+'" class="'+this["class"].container+" "+this["class"].hidden+" "+this["class"].stylePrefix+this.options.className+'"></div>'),this.adapter.css(this.container,{position:"absolute"}),this.options.ajax&&this.adapter.addClass(this.container,this["class"].loading),this.options.fixed&&this.adapter.addClass(this.container,this["class"].fixed),this.options.showEffect&&this.adapter.addClass(this.container,""+this["class"].showEffectPrefix+this.options.showEffect),this.options.hideEffect?this.adapter.addClass(this.container,""+this["class"].hideEffectPrefix+this.options.hideEffect):void 0},t.prototype._buildElements=function(){var t,e;return this.tooltipElement=this.adapter.create('<div class="'+this["class"].opentip+'"><div class="'+this["class"].header+'"></div><div class="'+this["class"].content+'"></div></div>'),this.backgroundCanvas=this.adapter.wrap(document.createElement("canvas")),this.adapter.css(this.backgroundCanvas,{position:"absolute"}),"undefined"!=typeof G_vmlCanvasManager&&null!==G_vmlCanvasManager&&G_vmlCanvasManager.initElement(this.adapter.unwrap(this.backgroundCanvas)),t=this.adapter.find(this.tooltipElement,"."+this["class"].header),this.options.title&&(e=this.adapter.create("<h1></h1>"),this.adapter.update(e,this.options.title,this.options.escapeTitle),this.adapter.append(t,e)),this.options.ajax&&!this.loaded&&this.adapter.append(this.tooltipElement,this.adapter.create('<div class="'+this["class"].loadingIndicator+'"><span>\u21bb</span></div>')),__indexOf.call(this.options.hideTriggers,"closeButton")>=0&&(this.closeButtonElement=this.adapter.create('<a href="javascript:undefined;" class="'+this["class"].close+'"><span>Close</span></a>'),this.adapter.append(t,this.closeButtonElement)),this.adapter.append(this.container,this.backgroundCanvas),this.adapter.append(this.container,this.tooltipElement),this.adapter.append(document.body,this.container),this._newContent=!0,this.redraw=!0},t.prototype.setContent=function(t){return this.content=t,this._newContent=!0,"function"==typeof this.content?(this._contentFunction=this.content,this.content=""):this._contentFunction=null,this.visible?this._updateElementContent():void 0},t.prototype._updateElementContent=function(){var t;return(this._newContent||!this.options.cache&&this._contentFunction)&&(t=this.adapter.find(this.container,"."+this["class"].content),null!=t&&(this._contentFunction&&(this.debug("Executing content function."),this.content=this._contentFunction(this)),this.adapter.update(t,this.content,this.options.escapeContent)),this._newContent=!1),this._storeAndLockDimensions(),this.reposition()},t.prototype._storeAndLockDimensions=function(){var t;if(this.container)return t=this.dimensions,this.adapter.css(this.container,{width:"auto",left:"0px",top:"0px"}),this.dimensions=this.adapter.dimensions(this.container),this.dimensions.width+=1,this.adapter.css(this.container,{width:""+this.dimensions.width+"px",top:""+this.currentPosition.top+"px",left:""+this.currentPosition.left+"px"}),this._dimensionsEqual(this.dimensions,t)?void 0:(this.redraw=!0,this._draw())},t.prototype.activate=function(){return this._setupObservers("hidden","hiding")},t.prototype.deactivate=function(){return this.debug("Deactivating tooltip."),this.hide(),this._setupObservers("-showing","-visible","-hidden","-hiding")},t.prototype._setupObservers=function(){var t,e,s,n,i,o,r,a,h,c,p,l,u,d,f,m,g=this;for(n=1<=arguments.length?__slice.call(arguments,0):[],o=0,c=n.length;c>o;o++)if(s=n[o],e=!1,"-"===s.charAt(0)&&(e=!0,s=s.substr(1)),this.currentObservers[s]!==!e)switch(this.currentObservers[s]=!e,t=function(){var t,s,n;return t=1<=arguments.length?__slice.call(arguments,0):[],e?(s=g.adapter).stopObserving.apply(s,t):(n=g.adapter).observe.apply(n,t)},s){case"showing":for(d=this.hideTriggers,r=0,p=d.length;p>r;r++)i=d[r],t(i.element,i.event,this.bound.prepareToHide);t(null!=document.onresize?document:window,"resize",this.bound.reposition),t(window,"scroll",this.bound.reposition);break;case"visible":for(f=this.showTriggersWhenVisible,a=0,l=f.length;l>a;a++)i=f[a],t(i.element,i.event,this.bound.prepareToShow);break;case"hiding":for(m=this.showTriggers,h=0,u=m.length;u>h;h++)i=m[h],t(i.element,i.event,this.bound.prepareToShow);break;case"hidden":break;default:throw new Error("Unknown state: "+s)}return null},t.prototype.prepareToShow=function(){return this._abortHiding(),this._abortShowing(),this.visible?void 0:(this.debug("Showing in "+this.options.delay+"s."),null==this.container&&this._setup(),this.options.group&&t._abortShowingGroup(this.options.group,this),this.preparingToShow=!0,this._setupObservers("-hidden","-hiding","showing"),this._followMousePosition(),this.options.fixed&&!this.options.target&&(this.initialMousePosition=mousePosition),this.reposition(),this._showTimeoutId=this.setTimeout(this.bound.show,this.options.delay||0))},t.prototype.show=function(){var e=this;return this._abortHiding(),this.visible?void 0:(this._clearTimeouts(),this._triggerElementExists()?(this.debug("Showing now."),null==this.container&&this._setup(),this.options.group&&t._hideGroup(this.options.group,this),this.visible=!0,this.preparingToShow=!1,null==this.tooltipElement&&this._buildElements(),this._updateElementContent(),!this.options.ajax||this.loaded&&this.options.cache||this._loadAjax(),this._searchAndActivateCloseButtons(),this._startEnsureTriggerElement(),this.adapter.css(this.container,{zIndex:t.lastZIndex++}),this._setupObservers("-hidden","-hiding","-showing","-visible","showing","visible"),this.options.fixed&&!this.options.target&&(this.initialMousePosition=mousePosition),this.reposition(),this.adapter.removeClass(this.container,this["class"].hiding),this.adapter.removeClass(this.container,this["class"].hidden),this.adapter.addClass(this.container,this["class"].goingToShow),this.setCss3Style(this.container,{transitionDuration:"0s"}),this.defer(function(){var t;if(e.visible&&!e.preparingToHide)return e.adapter.removeClass(e.container,e["class"].goingToShow),e.adapter.addClass(e.container,e["class"].showing),t=0,e.options.showEffect&&e.options.showEffectDuration&&(t=e.options.showEffectDuration),e.setCss3Style(e.container,{transitionDuration:""+t+"s"}),e._visibilityStateTimeoutId=e.setTimeout(function(){return e.adapter.removeClass(e.container,e["class"].showing),e.adapter.addClass(e.container,e["class"].visible)},t),e._activateFirstInput()}),this._draw()):this.deactivate())},t.prototype._abortShowing=function(){return this.preparingToShow?(this.debug("Aborting showing."),this._clearTimeouts(),this._stopFollowingMousePosition(),this.preparingToShow=!1,this._setupObservers("-showing","-visible","hiding","hidden")):void 0},t.prototype.prepareToHide=function(){return this._abortShowing(),this._abortHiding(),this.visible?(this.debug("Hiding in "+this.options.hideDelay+"s"),this.preparingToHide=!0,this._setupObservers("-showing","visible","-hidden","hiding"),this._hideTimeoutId=this.setTimeout(this.bound.hide,this.options.hideDelay)):void 0},t.prototype.hide=function(){var t=this;return this._abortShowing(),this.visible&&(this._clearTimeouts(),this.debug("Hiding!"),this.visible=!1,this.preparingToHide=!1,this._stopEnsureTriggerElement(),this._setupObservers("-showing","-visible","-hiding","-hidden","hiding","hidden"),this.options.fixed||this._stopFollowingMousePosition(),this.container)?(this.adapter.removeClass(this.container,this["class"].visible),this.adapter.removeClass(this.container,this["class"].showing),this.adapter.addClass(this.container,this["class"].goingToHide),this.setCss3Style(this.container,{transitionDuration:"0s"}),this.defer(function(){var e;return t.adapter.removeClass(t.container,t["class"].goingToHide),t.adapter.addClass(t.container,t["class"].hiding),e=0,t.options.hideEffect&&t.options.hideEffectDuration&&(e=t.options.hideEffectDuration),t.setCss3Style(t.container,{transitionDuration:""+e+"s"}),t._visibilityStateTimeoutId=t.setTimeout(function(){return t.adapter.removeClass(t.container,t["class"].hiding),t.adapter.addClass(t.container,t["class"].hidden),t.setCss3Style(t.container,{transitionDuration:"0s"}),t.options.removeElementsOnHide?(t.debug("Removing HTML elements."),t.adapter.remove(t.container),delete t.container,delete t.tooltipElement):void 0},e)})):void 0},t.prototype._abortHiding=function(){return this.preparingToHide?(this.debug("Aborting hiding."),this._clearTimeouts(),this.preparingToHide=!1,this._setupObservers("-hiding","showing","visible")):void 0},t.prototype.reposition=function(){var t,e,s,n=this;return t=this.getPosition(),null==t||(e=this.options.stem,this.options.containInViewport&&(s=this._ensureViewportContainment(t),t=s.position,e=s.stem),this._positionsEqual(t,this.currentPosition))?void 0:(this.options.stem&&!e.eql(this.currentStem)&&(this.redraw=!0),this.currentPosition=t,this.currentStem=e,this._draw(),this.adapter.css(this.container,{left:""+t.left+"px",top:""+t.top+"px"}),this.defer(function(){var t,e;return t=n.adapter.unwrap(n.container),t.style.visibility="hidden",e=t.offsetHeight,t.style.visibility="visible"}))},t.prototype.getPosition=function(t,e,s){var n,i,o,r,a,h,c,p,l;if(this.container)return null==t&&(t=this.options.tipJoint),null==e&&(e=this.options.targetJoint),r={},this.options.target?(c=this.adapter.offset(this.options.target),h=this.adapter.dimensions(this.options.target),r=c,e.right?(p=this.adapter.unwrap(this.options.target),null!=p.getBoundingClientRect?r.left=p.getBoundingClientRect().right+(null!=(l=window.pageXOffset)?l:document.body.scrollLeft):r.left+=h.width):e.center&&(r.left+=Math.round(h.width/2)),e.bottom?r.top+=h.height:e.middle&&(r.top+=Math.round(h.height/2)),this.options.borderWidth&&(this.options.tipJoint.left&&(r.left+=this.options.borderWidth),this.options.tipJoint.right&&(r.left-=this.options.borderWidth),this.options.tipJoint.top?r.top+=this.options.borderWidth:this.options.tipJoint.bottom&&(r.top-=this.options.borderWidth))):r=this.initialMousePosition?{top:this.initialMousePosition.y,left:this.initialMousePosition.x}:{top:mousePosition.y,left:mousePosition.x},this.options.autoOffset&&(a=this.options.stem?this.options.stemLength:0,o=a&&this.options.fixed?2:10,n=t.middle&&!this.options.fixed?15:0,i=t.center&&!this.options.fixed?15:0,t.right?r.left-=o+n:t.left&&(r.left+=o+n),t.bottom?r.top-=o+i:t.top&&(r.top+=o+i),a&&(null==s&&(s=this.options.stem),s.right?r.left-=a:s.left&&(r.left+=a),s.bottom?r.top-=a:s.top&&(r.top+=a))),r.left+=this.options.offset[0],r.top+=this.options.offset[1],t.right?r.left-=this.dimensions.width:t.center&&(r.left-=Math.round(this.dimensions.width/2)),t.bottom?r.top-=this.dimensions.height:t.middle&&(r.top-=Math.round(this.dimensions.height/2)),r},t.prototype._ensureViewportContainment=function(e){var s,n,i,o,r,a,h,c,p,l,u,d;if(h=this.options.stem,i={position:e,stem:h},!this.visible||!e)return i;if(c=this._sticksOut(e),!c[0]&&!c[1])return i;if(l=new t.Joint(this.options.tipJoint),this.options.targetJoint&&(p=new t.Joint(this.options.targetJoint)),a=this.adapter.scrollOffset(),u=this.adapter.viewportDimensions(),d=[e.left-a[0],e.top-a[1]],s=!1,u.width>=this.dimensions.width&&c[0])switch(s=!0,c[0]){case this.STICKS_OUT_LEFT:l.setHorizontal("left"),this.options.targetJoint&&p.setHorizontal("right");break;case this.STICKS_OUT_RIGHT:l.setHorizontal("right"),this.options.targetJoint&&p.setHorizontal("left")}if(u.height>=this.dimensions.height&&c[1])switch(s=!0,c[1]){case this.STICKS_OUT_TOP:l.setVertical("top"),this.options.targetJoint&&p.setVertical("bottom");break;case this.STICKS_OUT_BOTTOM:l.setVertical("bottom"),this.options.targetJoint&&p.setVertical("top")}return s?(this.options.stem&&(h=l),e=this.getPosition(l,p,h),n=this._sticksOut(e),o=!1,r=!1,n[0]&&n[0]!==c[0]&&(o=!0,l.setHorizontal(this.options.tipJoint.horizontal),this.options.targetJoint&&p.setHorizontal(this.options.targetJoint.horizontal)),n[1]&&n[1]!==c[1]&&(r=!0,l.setVertical(this.options.tipJoint.vertical),this.options.targetJoint&&p.setVertical(this.options.targetJoint.vertical)),o&&r?i:((o||r)&&(this.options.stem&&(h=l),e=this.getPosition(l,p,h)),{position:e,stem:h})):i},t.prototype._sticksOut=function(t){var e,s,n,i;return s=this.adapter.scrollOffset(),i=this.adapter.viewportDimensions(),e=[t.left-s[0],t.top-s[1]],n=[!1,!1],e[0]<0?n[0]=this.STICKS_OUT_LEFT:e[0]+this.dimensions.width>i.width&&(n[0]=this.STICKS_OUT_RIGHT),e[1]<0?n[1]=this.STICKS_OUT_TOP:e[1]+this.dimensions.height>i.height&&(n[1]=this.STICKS_OUT_BOTTOM),n
},t.prototype._draw=function(){var e,s,n,i,o,r,a,h,c,p,l,u,d,f,m,g,v,y,b,w=this;if(this.backgroundCanvas&&this.redraw){if(this.debug("Drawing background."),this.redraw=!1,this.currentStem){for(v=["top","right","bottom","left"],m=0,g=v.length;g>m;m++)u=v[m],this.adapter.removeClass(this.container,"stem-"+u);this.adapter.addClass(this.container,"stem-"+this.currentStem.horizontal),this.adapter.addClass(this.container,"stem-"+this.currentStem.vertical)}return r=[0,0],a=[0,0],__indexOf.call(this.options.hideTriggers,"closeButton")>=0&&(o=new t.Joint("top right"===(null!=(y=this.currentStem)?y.toString():void 0)?"top left":"top right"),r=[this.options.closeButtonRadius+this.options.closeButtonOffset[0],this.options.closeButtonRadius+this.options.closeButtonOffset[1]],a=[this.options.closeButtonRadius-this.options.closeButtonOffset[0],this.options.closeButtonRadius-this.options.closeButtonOffset[1]]),n=this.adapter.clone(this.dimensions),i=[0,0],this.options.borderWidth&&(n.width+=2*this.options.borderWidth,n.height+=2*this.options.borderWidth,i[0]-=this.options.borderWidth,i[1]-=this.options.borderWidth),this.options.shadow&&(n.width+=2*this.options.shadowBlur,n.width+=Math.max(0,this.options.shadowOffset[0]-2*this.options.shadowBlur),n.height+=2*this.options.shadowBlur,n.height+=Math.max(0,this.options.shadowOffset[1]-2*this.options.shadowBlur),i[0]-=Math.max(0,this.options.shadowBlur-this.options.shadowOffset[0]),i[1]-=Math.max(0,this.options.shadowBlur-this.options.shadowOffset[1])),s={left:0,right:0,top:0,bottom:0},this.currentStem&&(this.currentStem.left?s.left=this.options.stemLength:this.currentStem.right&&(s.right=this.options.stemLength),this.currentStem.top?s.top=this.options.stemLength:this.currentStem.bottom&&(s.bottom=this.options.stemLength)),o&&(o.left?s.left=Math.max(s.left,a[0]):o.right&&(s.right=Math.max(s.right,a[0])),o.top?s.top=Math.max(s.top,a[1]):o.bottom&&(s.bottom=Math.max(s.bottom,a[1]))),n.width+=s.left+s.right,n.height+=s.top+s.bottom,i[0]-=s.left,i[1]-=s.top,this.currentStem&&this.options.borderWidth&&(b=this._getPathStemMeasures(this.options.stemBase,this.options.stemLength,this.options.borderWidth),f=b.stemLength,d=b.stemBase),e=this.adapter.unwrap(this.backgroundCanvas),e.width=n.width,e.height=n.height,this.adapter.css(this.backgroundCanvas,{width:""+e.width+"px",height:""+e.height+"px",left:""+i[0]+"px",top:""+i[1]+"px"}),h=e.getContext("2d"),h.setTransform(1,0,0,1,0,0),h.clearRect(0,0,e.width,e.height),h.beginPath(),h.fillStyle=this._getColor(h,this.dimensions,this.options.background,this.options.backgroundGradientHorizontal),h.lineJoin="miter",h.miterLimit=500,l=this.options.borderWidth/2,this.options.borderWidth?(h.strokeStyle=this.options.borderColor,h.lineWidth=this.options.borderWidth):(f=this.options.stemLength,d=this.options.stemBase),null==d&&(d=0),p=function(t,e,s){return s&&h.moveTo(Math.max(d,w.options.borderRadius,r[0])+1-l,-l),e?(h.lineTo(t/2-d/2,-l),h.lineTo(t/2,-f-l),h.lineTo(t/2+d/2,-l)):void 0},c=function(t,e,s){var n,i,o,a;return t?(h.lineTo(-d+l,0-l),h.lineTo(f+l,-f-l),h.lineTo(l,d-l)):e?(a=w.options.closeButtonOffset,o=r[0],s%2!==0&&(a=[a[1],a[0]],o=r[1]),n=Math.acos(a[1]/w.options.closeButtonRadius),i=Math.acos(a[0]/w.options.closeButtonRadius),h.lineTo(-o+l,-l),h.arc(l-a[0],-l+a[1],w.options.closeButtonRadius,-(Math.PI/2+n),i,!1)):(h.lineTo(-w.options.borderRadius+l,-l),h.quadraticCurveTo(l,-l,l,w.options.borderRadius-l))},h.translate(-i[0],-i[1]),h.save(),function(){var e,s,n,i,r,a,l,u,d,f,m;for(m=[],s=d=0,f=t.positions.length/2;f>=0?f>d:d>f;s=f>=0?++d:--d)r=2*s,a=0===s||3===s?0:w.dimensions.width,l=2>s?0:w.dimensions.height,u=Math.PI/2*s,n=s%2===0?w.dimensions.width:w.dimensions.height,i=new t.Joint(t.positions[r]),e=new t.Joint(t.positions[r+1]),h.save(),h.translate(a,l),h.rotate(u),p(n,i.eql(w.currentStem),0===s),h.translate(n,0),c(e.eql(w.currentStem),e.eql(o),s),m.push(h.restore());return m}(),h.closePath(),h.save(),this.options.shadow&&(h.shadowColor=this.options.shadowColor,h.shadowBlur=this.options.shadowBlur,h.shadowOffsetX=this.options.shadowOffset[0],h.shadowOffsetY=this.options.shadowOffset[1]),h.fill(),h.restore(),this.options.borderWidth&&h.stroke(),h.restore(),o?function(){var t,e,s,n,i;return s=e=2*w.options.closeButtonRadius,"top right"===o.toString()?(i=[w.dimensions.width-w.options.closeButtonOffset[0],w.options.closeButtonOffset[1]],t=[i[0]+l,i[1]-l]):(i=[w.options.closeButtonOffset[0],w.options.closeButtonOffset[1]],t=[i[0]-l,i[1]-l]),h.translate(t[0],t[1]),n=w.options.closeButtonCrossSize/2,h.save(),h.beginPath(),h.strokeStyle=w.options.closeButtonCrossColor,h.lineWidth=w.options.closeButtonCrossLineWidth,h.lineCap="round",h.moveTo(-n,-n),h.lineTo(n,n),h.stroke(),h.beginPath(),h.moveTo(n,-n),h.lineTo(-n,n),h.stroke(),h.restore(),w.adapter.css(w.closeButtonElement,{left:""+(i[0]-n-w.options.closeButtonLinkOverscan)+"px",top:""+(i[1]-n-w.options.closeButtonLinkOverscan)+"px",width:""+(w.options.closeButtonCrossSize+2*w.options.closeButtonLinkOverscan)+"px",height:""+(w.options.closeButtonCrossSize+2*w.options.closeButtonLinkOverscan)+"px"})}():void 0}},t.prototype._getPathStemMeasures=function(t,e,s){var n,i,o,r,a,h,c;if(r=s/2,o=Math.atan(t/2/e),n=2*o,a=r/Math.sin(n),i=2*a*Math.cos(o),c=r+e-i,0>c)throw new Error("Sorry but your stemLength / stemBase ratio is strange.");return h=Math.tan(o)*c*2,{stemLength:c,stemBase:h}},t.prototype._getColor=function(t,e,s,n){var i,o,r,a,h;if(null==n&&(n=!1),"string"==typeof s)return s;for(o=n?t.createLinearGradient(0,0,e.width,0):t.createLinearGradient(0,0,0,e.height),r=a=0,h=s.length;h>a;r=++a)i=s[r],o.addColorStop(i[0],i[1]);return o},t.prototype._searchAndActivateCloseButtons=function(){var t,e,s,n;for(n=this.adapter.findAll(this.container,"."+this["class"].close),e=0,s=n.length;s>e;e++)t=n[e],this.hideTriggers.push({element:this.adapter.wrap(t),event:"click"});return this.currentObservers.showing&&this._setupObservers("-showing","showing"),this.currentObservers.visible?this._setupObservers("-visible","visible"):void 0},t.prototype._activateFirstInput=function(){var t;return t=this.adapter.unwrap(this.adapter.find(this.container,"input, textarea")),null!=t&&"function"==typeof t.focus?t.focus():void 0},t.prototype._followMousePosition=function(){return this.options.fixed?void 0:t._observeMousePosition(this.bound.reposition)},t.prototype._stopFollowingMousePosition=function(){return this.options.fixed?void 0:t._stopObservingMousePosition(this.bound.reposition)},t.prototype._clearShowTimeout=function(){return clearTimeout(this._showTimeoutId)},t.prototype._clearHideTimeout=function(){return clearTimeout(this._hideTimeoutId)},t.prototype._clearTimeouts=function(){return clearTimeout(this._visibilityStateTimeoutId),this._clearShowTimeout(),this._clearHideTimeout()},t.prototype._triggerElementExists=function(){var t;for(t=this.adapter.unwrap(this.triggerElement);t.parentNode;){if("BODY"===t.parentNode.tagName)return!0;t=t.parentNode}return!1},t.prototype._loadAjax=function(){var t=this;if(!this.loading)return this.loaded=!1,this.loading=!0,this.adapter.addClass(this.container,this["class"].loading),this.setContent(""),this.debug("Loading content from "+this.options.ajax),this.adapter.ajax({url:this.options.ajax,method:this.options.ajaxMethod,onSuccess:function(e){return t.debug("Loading successful."),t.adapter.removeClass(t.container,t["class"].loading),t.setContent(e)},onError:function(e){var s;return s=t.options.ajaxErrorMessage,t.debug(s,e),t.setContent(s),t.adapter.addClass(t.container,t["class"].ajaxError)},onComplete:function(){return t.adapter.removeClass(t.container,t["class"].loading),t.loading=!1,t.loaded=!0,t._searchAndActivateCloseButtons(),t._activateFirstInput(),t.reposition()}})},t.prototype._ensureTriggerElement=function(){return this._triggerElementExists()?void 0:(this.deactivate(),this._stopEnsureTriggerElement())},t.prototype._ensureTriggerElementInterval=1e3,t.prototype._startEnsureTriggerElement=function(){var t=this;return this._ensureTriggerElementTimeoutId=setInterval(function(){return t._ensureTriggerElement()},this._ensureTriggerElementInterval)},t.prototype._stopEnsureTriggerElement=function(){return clearInterval(this._ensureTriggerElementTimeoutId)},t}(),vendors=["khtml","ms","o","moz","webkit"],Opentip.prototype.setCss3Style=function(t,e){var s,n,i,o,r;t=this.adapter.unwrap(t),r=[];for(s in e)__hasProp.call(e,s)&&(n=e[s],r.push(null!=t.style[s]?t.style[s]=n:function(){var e,r,a;for(a=[],e=0,r=vendors.length;r>e;e++)i=vendors[e],o=""+this.ucfirst(i)+this.ucfirst(s),a.push(null!=t.style[o]?t.style[o]=n:void 0);return a}.call(this)));return r},Opentip.prototype.defer=function(t){return setTimeout(t,0)},Opentip.prototype.setTimeout=function(t,e){return setTimeout(t,e?1e3*e:0)},Opentip.prototype.ucfirst=function(t){return null==t?"":t.charAt(0).toUpperCase()+t.slice(1)},Opentip.prototype.dasherize=function(t){return t.replace(/([A-Z])/g,function(t,e){return"-"+e.toLowerCase()})},mousePositionObservers=[],mousePosition={x:0,y:0},mouseMoved=function(t){var e,s,n,i;for(mousePosition=Opentip.adapter.mousePosition(t),i=[],s=0,n=mousePositionObservers.length;n>s;s++)e=mousePositionObservers[s],i.push(e());return i},Opentip.followMousePosition=function(){return Opentip.adapter.observe(document.body,"mousemove",mouseMoved)},Opentip._observeMousePosition=function(t){return mousePositionObservers.push(t)},Opentip._stopObservingMousePosition=function(t){var e;return mousePositionObservers=function(){var s,n,i;for(i=[],s=0,n=mousePositionObservers.length;n>s;s++)e=mousePositionObservers[s],e!==t&&i.push(e);return i}()},Opentip.Joint=function(){function t(t){null!=t&&(t instanceof Opentip.Joint&&(t=t.toString()),this.set(t))}return t.prototype.set=function(t){return t=t.toLowerCase(),this.setHorizontal(t),this.setVertical(t),this},t.prototype.setHorizontal=function(t){var e,s,n,i,o,r,a;for(s=["left","center","right"],n=0,o=s.length;o>n;n++)e=s[n],~t.indexOf(e)&&(this.horizontal=e.toLowerCase());for(null==this.horizontal&&(this.horizontal="center"),a=[],i=0,r=s.length;r>i;i++)e=s[i],a.push(this[e]=this.horizontal===e?e:void 0);return a},t.prototype.setVertical=function(t){var e,s,n,i,o,r,a;for(s=["top","middle","bottom"],n=0,o=s.length;o>n;n++)e=s[n],~t.indexOf(e)&&(this.vertical=e.toLowerCase());for(null==this.vertical&&(this.vertical="middle"),a=[],i=0,r=s.length;r>i;i++)e=s[i],a.push(this[e]=this.vertical===e?e:void 0);return a},t.prototype.eql=function(t){return null!=t&&this.horizontal===t.horizontal&&this.vertical===t.vertical},t.prototype.flip=function(){var t,e;return e=Opentip.position[this.toString(!0)],t=(e+4)%8,this.set(Opentip.positions[t]),this},t.prototype.toString=function(t){var e,s;return null==t&&(t=!1),s="middle"===this.vertical?"":this.vertical,e="center"===this.horizontal?"":this.horizontal,s&&e&&(e=t?Opentip.prototype.ucfirst(e):" "+e),""+s+e},t}(),Opentip.prototype._positionsEqual=function(t,e){return null!=t&&null!=e&&t.left===e.left&&t.top===e.top},Opentip.prototype._dimensionsEqual=function(t,e){return null!=t&&null!=e&&t.width===e.width&&t.height===e.height},Opentip.prototype.debug=function(){var t;return t=1<=arguments.length?__slice.call(arguments,0):[],Opentip.debug&&null!=("undefined"!=typeof console&&null!==console?console.debug:void 0)?(t.unshift("#"+this.id+" |"),console.debug.apply(console,t)):void 0},Opentip.findElements=function(){var t,e,s,n,i,o,r,a,h,c;for(t=Opentip.adapter,h=t.findAll(document.body,"[data-ot]"),c=[],r=0,a=h.length;a>r;r++){s=h[r],o={},e=t.data(s,"ot"),(""===e||"true"===e||"yes"===e)&&(e=t.attr(s,"title"),t.attr(s,"title","")),e=e||"";for(n in Opentip.styles.standard)i=t.data(s,"ot"+Opentip.prototype.ucfirst(n)),null!=i&&("yes"===i||"true"===i||"on"===i?i=!0:("no"===i||"false"===i||"off"===i)&&(i=!1),o[n]=i);c.push(new Opentip(s,e,o))}return c},Opentip.version="2.4.6",Opentip.debug=!1,Opentip.lastId=0,Opentip.lastZIndex=100,Opentip.tips=[],Opentip._abortShowingGroup=function(t,e){var s,n,i,o,r;for(o=Opentip.tips,r=[],n=0,i=o.length;i>n;n++)s=o[n],r.push(s!==e&&s.options.group===t?s._abortShowing():void 0);return r},Opentip._hideGroup=function(t,e){var s,n,i,o,r;for(o=Opentip.tips,r=[],n=0,i=o.length;i>n;n++)s=o[n],r.push(s!==e&&s.options.group===t?s.hide():void 0);return r},Opentip.adapters={},Opentip.adapter=null,firstAdapter=!0,Opentip.addAdapter=function(t){return Opentip.adapters[t.name]=t,firstAdapter?(Opentip.adapter=t,t.domReady(Opentip.findElements),t.domReady(Opentip.followMousePosition),firstAdapter=!1):void 0},Opentip.positions=["top","topRight","right","bottomRight","bottom","bottomLeft","left","topLeft"],Opentip.position={},_ref=Opentip.positions,i=_i=0,_len=_ref.length;_len>_i;i=++_i)position=_ref[i],Opentip.position[position]=i;Opentip.styles={standard:{"extends":null,title:void 0,escapeTitle:!0,escapeContent:!1,className:"standard",stem:!0,delay:null,hideDelay:.1,fixed:!1,showOn:"mouseover",hideTrigger:"trigger",hideTriggers:[],hideOn:null,removeElementsOnHide:!1,offset:[0,0],containInViewport:!0,autoOffset:!0,showEffect:"appear",hideEffect:"fade",showEffectDuration:.3,hideEffectDuration:.2,stemLength:5,stemBase:8,tipJoint:"top left",target:null,targetJoint:null,cache:!0,ajax:!1,ajaxMethod:"GET",ajaxErrorMessage:"There was a problem downloading the content.",group:null,style:null,background:"#fff18f",backgroundGradientHorizontal:!1,closeButtonOffset:[5,5],closeButtonRadius:7,closeButtonCrossSize:4,closeButtonCrossColor:"#d2c35b",closeButtonCrossLineWidth:1.5,closeButtonLinkOverscan:6,borderRadius:5,borderWidth:1,borderColor:"#f2e37b",shadow:!0,shadowBlur:10,shadowOffset:[3,3],shadowColor:"rgba(0, 0, 0, 0.1)"},glass:{"extends":"standard",className:"glass",background:[[0,"rgba(252, 252, 252, 0.8)"],[.5,"rgba(255, 255, 255, 0.8)"],[.5,"rgba(250, 250, 250, 0.9)"],[1,"rgba(245, 245, 245, 0.9)"]],borderColor:"#eee",closeButtonCrossColor:"rgba(0, 0, 0, 0.2)",borderRadius:15,closeButtonRadius:10,closeButtonOffset:[8,8]},dark:{"extends":"standard",className:"dark",borderRadius:13,borderColor:"#444",closeButtonCrossColor:"rgba(240, 240, 240, 1)",shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffset:[2,2],background:[[0,"rgba(30, 30, 30, 0.7)"],[.5,"rgba(30, 30, 30, 0.8)"],[.5,"rgba(10, 10, 10, 0.8)"],[1,"rgba(10, 10, 10, 0.9)"]]},alert:{"extends":"standard",className:"alert",borderRadius:1,borderColor:"#AE0D11",closeButtonCrossColor:"rgba(255, 255, 255, 1)",shadowColor:"rgba(0, 0, 0, 0.3)",shadowOffset:[2,2],background:[[0,"rgba(203, 15, 19, 0.7)"],[.5,"rgba(203, 15, 19, 0.8)"],[.5,"rgba(189, 14, 18, 0.8)"],[1,"rgba(179, 14, 17, 0.9)"]]}},Opentip.defaultStyle="standard","undefined"!=typeof module&&null!==module?module.exports=Opentip:window.Opentip=Opentip;var Adapter,__hasProp={}.hasOwnProperty,__slice=[].slice;Adapter=function(){function t(){}var e,s;return t.prototype.name="native",t.prototype.domReady=function(t){var e,s,n,i,o,r,a,h,c,p,l;if(n=!1,c=!0,p=window,s=document,"complete"===(l=s.readyState)||"loaded"===l)return t();if(h=s.documentElement,e=s.addEventListener?"addEventListener":"attachEvent",a=s.addEventListener?"removeEventListener":"detachEvent",r=s.addEventListener?"":"on",i=function(e){return"readystatechange"!==e.type||"complete"===s.readyState?(("load"===e.type?p:s)[a](r+e.type,i,!1),n?void 0:(n=!0,t())):void 0},o=function(){try{h.doScroll("left")}catch(t){return void setTimeout(o,50)}return i("poll")},"complete"!==s.readyState){if(s.createEventObject&&h.doScroll){try{c=!p.frameElement}catch(u){}c&&o()}return s[e](r+"DOMContentLoaded",i,!1),s[e](r+"readystatechange",i,!1),p[e](r+"load",i,!1)}},t.prototype.create=function(t){var e;return e=document.createElement("div"),e.innerHTML=t,this.wrap(e.childNodes)},t.prototype.wrap=function(t){var e;return t?"string"==typeof t?(t=this.find(document.body,t),t=t?[t]:[]):t instanceof NodeList?t=function(){var s,n,i;for(i=[],s=0,n=t.length;n>s;s++)e=t[s],i.push(e);return i}():t instanceof Array||(t=[t]):t=[],t},t.prototype.unwrap=function(t){return this.wrap(t)[0]},t.prototype.tagName=function(t){return this.unwrap(t).tagName},t.prototype.attr=function(t,e,s){return 3===arguments.length?this.unwrap(t).setAttribute(e,s):this.unwrap(t).getAttribute(e)},s=0,e={},t.prototype.data=function(t,n,i){var o;return o=this.attr(t,"data-id"),o||(o=++s,this.attr(t,"data-id",o),e[o]={}),3===arguments.length?e[o][n]=i:(i=e[o][n],null!=i?i:(i=this.attr(t,"data-"+Opentip.prototype.dasherize(n)),i&&(e[o][n]=i),i))},t.prototype.find=function(t,e){return this.unwrap(t).querySelector(e)},t.prototype.findAll=function(t,e){return this.unwrap(t).querySelectorAll(e)},t.prototype.update=function(t,e,s){return t=this.unwrap(t),s?(t.innerHTML="",t.appendChild(document.createTextNode(e))):t.innerHTML=e},t.prototype.append=function(t,e){var s,n;return s=this.unwrap(e),n=this.unwrap(t),n.appendChild(s)},t.prototype.remove=function(t){var e;return t=this.unwrap(t),e=t.parentNode,null!=e?e.removeChild(t):void 0},t.prototype.addClass=function(t,e){return this.unwrap(t).classList.add(e)},t.prototype.removeClass=function(t,e){return this.unwrap(t).classList.remove(e)},t.prototype.css=function(t,e){var s,n,i;t=this.unwrap(this.wrap(t)),i=[];for(s in e)__hasProp.call(e,s)&&(n=e[s],i.push(t.style[s]=n));return i},t.prototype.dimensions=function(t){var e,s;return t=this.unwrap(this.wrap(t)),e={width:t.offsetWidth,height:t.offsetHeight},e.width&&e.height||(s={position:t.style.position||"",visibility:t.style.visibility||"",display:t.style.display||""},this.css(t,{position:"absolute",visibility:"hidden",display:"block"}),e={width:t.offsetWidth,height:t.offsetHeight},this.css(t,s)),e},t.prototype.scrollOffset=function(){return[window.pageXOffset||document.documentElement.scrollLeft||document.body.scrollLeft,window.pageYOffset||document.documentElement.scrollTop||document.body.scrollTop]},t.prototype.viewportDimensions=function(){return{width:document.documentElement.clientWidth,height:document.documentElement.clientHeight}},t.prototype.mousePosition=function(t){var e;if(e={x:0,y:0},null==t&&(t=window.event),null!=t){try{t.pageX||t.pageY?(e.x=t.pageX,e.y=t.pageY):(t.clientX||t.clientY)&&(e.x=t.clientX+document.body.scrollLeft+document.documentElement.scrollLeft,e.y=t.clientY+document.body.scrollTop+document.documentElement.scrollTop)}catch(t){}return e}},t.prototype.offset=function(t){var e;for(t=this.unwrap(t),e={top:t.offsetTop,left:t.offsetLeft};t=t.offsetParent;)e.top+=t.offsetTop,e.left+=t.offsetLeft,t!==document.body&&(e.top-=t.scrollTop,e.left-=t.scrollLeft);return e},t.prototype.observe=function(t,e,s){return this.unwrap(t).addEventListener(e,s,!1)},t.prototype.stopObserving=function(t,e,s){return this.unwrap(t).removeEventListener(e,s,!1)},t.prototype.ajax=function(t){var e,s,n;if(null==t.url)throw new Error("No url provided");if(window.XMLHttpRequest)e=new XMLHttpRequest;else if(window.ActiveXObject)try{e=new ActiveXObject("Msxml2.XMLHTTP")}catch(i){try{e=new ActiveXObject("Microsoft.XMLHTTP")}catch(i){}}if(!e)throw new Error("Can't create XMLHttpRequest");return e.onreadystatechange=function(){if(4===e.readyState){try{200===e.status?"function"==typeof t.onSuccess&&t.onSuccess(e.responseText):"function"==typeof t.onError&&t.onError("Server responded with status "+e.status)}catch(s){"function"==typeof t.onError&&t.onError(s.message)}return"function"==typeof t.onComplete?t.onComplete():void 0}},e.open(null!=(s=null!=(n=t.method)?n.toUpperCase():void 0)?s:"GET",t.url),e.send()},t.prototype.clone=function(t){var e,s,n;s={};for(e in t)__hasProp.call(t,e)&&(n=t[e],s[e]=n);return s},t.prototype.extend=function(){var t,e,s,n,i,o,r;for(n=arguments[0],s=2<=arguments.length?__slice.call(arguments,1):[],o=0,r=s.length;r>o;o++){e=s[o];for(t in e)__hasProp.call(e,t)&&(i=e[t],n[t]=i)}return n},t}(),Opentip.addAdapter(new Adapter),"undefined"==typeof document||"classList"in document.createElement("a")||!function(t){"use strict";if("HTMLElement"in t||"Element"in t){var e="classList",s="prototype",n=(t.HTMLElement||t.Element)[s],i=Object,o=String[s].trim||function(){return this.replace(/^\s+|\s+$/g,"")},r=Array[s].indexOf||function(t){for(var e=0,s=this.length;s>e;e++)if(e in this&&this[e]===t)return e;return-1},a=function(t,e){this.name=t,this.code=DOMException[t],this.message=e},h=function(t,e){if(""===e)throw new a("SYNTAX_ERR","An invalid or illegal string was specified");if(/\s/.test(e))throw new a("INVALID_CHARACTER_ERR","String contains an invalid character");return r.call(t,e)},c=function(t){for(var e=o.call(t.className),s=e?e.split(/\s+/):[],n=0,i=s.length;i>n;n++)this.push(s[n]);this._updateClassName=function(){t.className=this.toString()}},p=c[s]=[],l=function(){return new c(this)};if(a[s]=Error[s],p.item=function(t){return this[t]||null},p.contains=function(t){return t+="",-1!==h(this,t)},p.add=function(){var t,e=arguments,s=0,n=e.length,i=!1;do t=e[s]+"",-1===h(this,t)&&(this.push(t),i=!0);while(++s<n);i&&this._updateClassName()},p.remove=function(){var t,e=arguments,s=0,n=e.length,i=!1;do{t=e[s]+"";var o=h(this,t);-1!==o&&(this.splice(o,1),i=!0)}while(++s<n);i&&this._updateClassName()},p.toggle=function(t,e){t+="";var s=this.contains(t),n=s?e!==!0&&"remove":e!==!1&&"add";return n&&this[n](t),s},p.toString=function(){return this.join(" ")},i.defineProperty){var u={get:l,enumerable:!0,configurable:!0};try{i.defineProperty(n,e,u)}catch(d){-2146823252===d.number&&(u.enumerable=!1,i.defineProperty(n,e,u))}}else i[s].__defineGetter__&&n.__defineGetter__(e,l)}}(self),!window.addEventListener&&function(t,e,s,n,i,o,r){t[n]=e[n]=s[n]=function(t,e){var s=this;r.unshift([s,t,e,function(t){t.currentTarget=s,t.preventDefault=function(){t.returnValue=!1},t.stopPropagation=function(){t.cancelBubble=!0},t.target=t.srcElement||s,e.call(s,t)}]),this.attachEvent("on"+t,r[0][3])},t[i]=e[i]=s[i]=function(t,e){for(var s,n=0;s=r[n];++n)if(s[0]==this&&s[1]==t&&s[2]==e)return this.detachEvent("on"+t,r.splice(n,1)[0][3])},t[o]=e[o]=s[o]=function(t){return this.fireEvent("on"+t.type,t)}}(Window.prototype,HTMLDocument.prototype,Element.prototype,"addEventListener","removeEventListener","dispatchEvent",[]);var ContentMixin={wrapContent:function(t,e){return React.DOM.div({className:this.props.navOpen?"nav-open":null},React.DOM.div({className:"navigation"},e),React.DOM.div({className:"primary-content"},React.DOM.div({className:"inner "},t)))}},SortMixin={sortHandler:function(t){t.preventDefault(),this.props.updateResponse({sort:t.target.innerHTML,sortDirection:!this.props.sortDirection})},sortNodes:function(t){return this.props.sort?t.sort(this.comparator(this.props.sort,this.props.sortDirection)):t},comparator:function(t,e){return["name","student_name"].indexOf(t)>-1?e?function(e,s){return e[t].toLowerCase()<s[t].toLowerCase()?-1:e[t].toLowerCase()>s[t].toLowerCase()?1:0}:function(e,s){return s[t].toLowerCase()<e[t].toLowerCase()?-1:s[t].toLowerCase()>e[t].toLowerCase()?1:0}:e?function(e,s){return e[t]-s[t]}:function(e,s){return s[t]-e[t]}}},StatusMessage={loading:function(){return Modernizr.cssanimations?React.DOM.div({className:"spinner"},React.DOM.div({className:"rect1"}),React.DOM.div({className:"rect2"}),React.DOM.div({className:"rect3"}),React.DOM.div({className:"rect4"}),React.DOM.div({className:"rect5"})):React.DOM.div({className:"loading-basic"},"Loading ...")},error:function(t){return React.DOM.div({className:"error-message"},"Oops! There was an error. Please try again and refresh the page. ",React.DOM.span(null,"("+t.status+" "+t.error+")"))}},AsyncLoader=React.createClass({displayName:"AsyncLoader",propTypes:{content:React.PropTypes.func.isRequired,async:React.PropTypes.oneOfType([React.PropTypes.string.isRequired,React.PropTypes.func.isRequired]),handleResponse:React.PropTypes.func.isRequired,loading:React.PropTypes.func.isRequired,error:React.PropTypes.func.isRequired,wrapContent:React.PropTypes.func,response:React.PropTypes.object},componentWillMount:function(){this.props.response=null,this.fetch()},componentWillReceiveProps:function(t){t.response||this.fetch()},render:function(){var t,e,s;switch(e=this.props.response?this.props.response.status:"loading",s=this.props.props?_.extend({},this.props.props,this.props.response):this.props.response,e){case"success":t=this.props.content(s);var n=this.props.content();t=n._isReactElement?this.props.content(s):this.props.content()(s);break;case"error":t=this.props.error(s);break;default:t=this.props.loading(s)}return this.props.wrapContent?this.props.wrapContent(t):t},fetch:function(){if("function"==typeof this.props.async)this.props.async(this.props.handleResponse,this.props.props);else if(this.props.endpoint){var t="function"==typeof this.props.endpoint?this.props.endpoint(this.props.props):this.props.endpoint,e=this.props.handleResponse;$.ajax({url:t,dataType:"JSON"}).done(function(t){e(_.extend({status:"success"},t))}).error(function(t){e({status:t.status,status:"error",error:t.statusText})})}}});AsyncLoader=React.createFactory(AsyncLoader);var Attendance=React.createClass({displayName:"Attendance",getDefaultProps:function(){return{attendances:[]}},render:function(){var t,e=0;return t=this.props.attendances.map(function(t,s){return t.attended&&e++,React.DOM.div({key:t.id,className:t.attended?"student present":"student",onClick:this.toggleStudent.bind(this,s)},React.DOM.img({src:t.student_avatar}),React.DOM.input({value:t.student_name,readOnly:!0}))},this),React.DOM.div(null,React.DOM.h3(null,e+" of "+this.props.attendances.length+" attended - (",this.props.attendances.length-e+" absent)"),React.DOM.div({className:"members-wrap"},t))},toggleStudent:function(t){this.props.attendances[t].attended=!this.props.attendances[t].attended,this.props.updateResponse({attendances:this.props.attendances}),$.ajax({type:"PUT",url:"/attendances/"+this.props.attendances[t].id,data:{attended:this.props.attendances[t].attended,authenticity_token:this.props.CSRFTOKEN},dataType:"JSON"})}});Attendance=React.createFactory(Attendance);var Attendances=React.createClass({displayName:"Attendances",mixins:[SortMixin,ContentMixin],getDefaultProps:function(){return{students:[],lessons:[]}},render:function(){var t,e,s,n,i,o=[],r=[],a=[];return s=this.createRow(_.extend({id:"_total",name:"Total"},this.props.aggregate)),e=this.sortNodes(this.props.students).map(function(t){var e=[];return t.attendances.forEach(function(t){e.push(React.DOM.td({className:t?"on":"off"},React.DOM.div()))}),o.push(React.DOM.tr({className:"d"},e)),t.total=t.attendances.length,this.createRow(t)},this),this.props.lessons.forEach(function(t,e){r.push(React.DOM.th({title:t.date_human},"L "+(e+1))),a.push(React.DOM.td(null,React.DOM.div({style:{height:t.percent+"%"}}),React.DOM.span(null,React.DOM.em(null,t.percent+"%"))))}),n=React.DOM.thead(null,React.DOM.tr(null,r)),i=React.DOM.tr({className:"totals"},a),t=React.DOM.div(null,React.DOM.h3(null,"Attendance Overview"),React.DOM.div({className:"attendences-wrap"},React.DOM.div({className:"rows-wrap"},React.DOM.div({className:"sorters"},React.DOM.span({onClick:this.sortHandler},"name"),React.DOM.span({onClick:this.sortHandler},"percent")),s,e),React.DOM.div({className:"data-wrap"},React.DOM.table(null,n,React.DOM.tbody(null,i,o))))),this.wrapContent(t)},createRow:function(t){return React.DOM.div({key:t.id,className:"row"},React.DOM.div({className:"user"},t.avatar?React.DOM.img({src:t.avatar}):null,React.DOM.div(null,t.name)),React.DOM.div({className:"summary"},React.DOM.span({className:"percent"},(t.percent||0)+"%"),React.DOM.span({className:"total"},(t.attended||0)+"/"+t.total)))}});Attendances=React.createFactory(Attendances);var Calendar=React.createClass({displayName:"Calendar",mixins:[ContentMixin],getDefaultProps:function(){return{}},render:function(){var t;return t=React.DOM.div(null,React.DOM.iframe({src:this.props.course.calendar_embed,frameBorder:0,scrolling:"no",seamless:!0,width:"100%",height:600})),this.wrapContent(t)}});Calendar=React.createFactory(Calendar);var Courses=React.createClass({displayName:"Courses",getDefaultProps:function(){return{courses:[]}},render:function(){var t=this.props.courses.map(function(t){return React.DOM.li({key:t.id},React.DOM.h4(null,t.name),Lessons({lessons:t.lessons}))},this);return React.DOM.ul({className:"courses-wrap"},t)}});Courses=React.createFactory(Courses);var debouncedUpdate=debounce(function(t,e){this.saveOne(t,e)},350),Feedback=React.createClass({displayName:"Feedback",getDefaultProps:function(){return{feedback:{},autosave:{},questions:[{name:"engagement",question:"How engaged were you during the lesson?",data:["Not engaged at all.","Mostly tuned out but there were a few interesting parts.","Neutral. I was engaged but it had more to do with my effort than the actual lesson.","Mostly engaged but I did tune out -- it's hard to pay attention for so long!","I was engaged the entire time."]},{name:"comprehension",question:"How well did you understand this lesson's content?",data:["This lesson might as well have been in another language.","This lesson was pretty hard and I understood very little.","I think I got it...","I understood almost everything.","I fully understood everything!"]},{name:"pace",question:"How slow/fast did this lesson's pace feel to you?",data:["This lesson was way too slow! I got bored.","This lesson could have been a little faster.","This lesson was the perfect pace for me.","This lesson could have been a little slower.","This lesson was way too fast! I was not able to keep up."]},{name:"quality",question:"What did you think of lesson overall?",data:["This lesson provided no value to me.","This lesson could have been a lot better.","This lesson was ok.","This lesson was good -- It provided a lot of value to me.","This lesson was fantastic! Let me buy you a beer."]}],textareas:[{name:"comments",question:"Any comments you would like to add?"},{name:"learned",question:"3+ things you learned (separate by blank lines please)"},{name:"questions",question:"Any questions you still on the material?"}]}},render:function(){var t,e=[],s=0;for(var n in this.props.feedback)s++;s>0&&(this.props.questions.forEach(function(t){var s=t.data.map(function(e,s){var n;return this.props.autosave[t.name]&&this.props.feedback[t.name]===s+1&&(n=autosaveStatusIcon(this.props.autosave[t.name])),React.DOM.li({className:this.props.feedback[t.name]===s+1?"active":null,onClick:this.saveOne.bind(this,t.name,s+1)},React.DOM.div({className:"num"},(s+1).toString()),React.DOM.div(null,e),n)},this);e.push(React.DOM.div({className:"question"},React.DOM.h4(null,t.question),React.DOM.ul({className:"multiple-choice"},s)))},this),this.props.textareas.forEach(function(t){var s;this.props.autosave[t.name]&&(s=autosaveStatusIcon(this.props.autosave[t.name])),e.push(React.DOM.div({className:"question"},React.DOM.h4(null,t.question,s),React.DOM.textarea({defaultValue:this.props.feedback[t.name],onChange:this.handleTextarea.bind(this,t.name),ref:t.name})))},this));var i;return this.props.autosave.all&&(i=autosaveStatusIcon(this.props.autosave.all)),t=React.DOM.div({className:"submit-wrap"},React.DOM.button({onClick:this.handleSubmit},"Save"),i),React.DOM.div({className:"questions-wrap"},e,t)},handleTextarea:function(t,e){debouncedUpdate.call(this,t,e.target.value)},handleSubmit:function(t){t.preventDefault();var e={};this.props.textareas.forEach(function(t){e[t.name]=this.refs[t.name].getDOMNode().value},this),this.save(e)},save:function(t){var e,s,n,i={},o=0,r=this.props.updateResponse;for(var a in t)this.props.feedback[a]=t[a],e||(e=a),o++;s=o>1?"all":e,n={authenticity_token:this.props.CSRFTOKEN},n.feedback=t,$.ajax({type:"PUT",url:"/feedbacks/"+this.props.feedback.id,data:n,dataType:"JSON"}).done(function(){i[s]="ok",r({autosave:i})}).error(function(){i[s]="error",r({autosave:i})})},saveOne:function(t,e){var s={};s[t]=e,this.save(s)}});Feedback=React.createFactory(Feedback);var FeedbackData=React.createClass({displayName:"FeedbackData",mixins:[SortMixin],getDefaultProps:function(){return{feedbacks:[],missing:[],feedbacksSortDirection:!0}},render:function(){var t,e,s,n;return e=React.DOM.thead(null,React.DOM.tr(null,React.DOM.th({onClick:this.sort},"student_name"),React.DOM.th({onClick:this.sort,"data-ot":this.toolTipTextForHeader("comprehension")},"comprehension"),React.DOM.th({onClick:this.sort,"data-ot":this.toolTipTextForHeader("engagement")},"engagement"),React.DOM.th({onClick:this.sort,"data-ot":this.toolTipTextForHeader("pace")},"pace"),React.DOM.th({onClick:this.sort,"data-ot":this.toolTipTextForHeader("quality")},"quality"))),t=this.props.feedbacksSort?this.props.feedbacks.sort(this.comparator(this.props.feedbacksSort,this.props.feedbacksSortDirection)):this.props.feedbacks,s=t.map(function(t,e){return[React.DOM.tr({key:e,className:"main"},React.DOM.td({className:"user"},t.student.avatar?React.DOM.img({src:t.student.avatar}):null,React.DOM.div(null,t.student.name)),React.DOM.td({className:"data"},React.DOM.div({className:"scale-"+t.comprehension,"data-ot":this.toolTipTextFor("comprehension",t.comprehension)},t.comprehension)),React.DOM.td({className:"data"},React.DOM.div({className:"scale-"+t.engagement,"data-ot":this.toolTipTextFor("engagement",t.engagement)},t.engagement)),React.DOM.td({className:"data"},React.DOM.div({className:"scale-pace-"+t.pace,"data-ot":this.toolTipTextFor("pace",t.pace)},t.pace)),React.DOM.td({className:"data"},React.DOM.div({className:"scale-"+t.quality,"data-ot":this.toolTipTextFor("quality",t.quality)},t.quality))),React.DOM.tr({className:"essays"},React.DOM.td({colSpan:5},this.renderTextResponse(t,"comments"),this.renderTextResponse(t,"learned"),this.renderTextResponse(t,"questions")))]
},this),this.props.missing.length>0&&(n=React.DOM.p(null,this.props.missing.length+" missing: "+this.props.missing.join(", "))),React.DOM.div(null,React.DOM.p(null,this.props.feedbacks.length+" of "+this.props.total_members+" total. "),n,React.DOM.table({id:"feedback-data"},e,React.DOM.tbody(null,s)))},renderTextResponse:function(t,e){return""===t[e]?null:React.DOM.div(null,React.DOM.strong(null,e),React.DOM.pre(null,t[e]))},sort:function(t){t.preventDefault(),this.props.updateResponse({feedbacksSort:t.target.innerHTML,feedbacksSortDirection:!this.props.feedbacksSortDirection})},componentDidMount:function(){Opentip.findElements()},toolTipTextFor:function(t,e){var s=this.questionDataForCategory(t);return s.data[e-1]},toolTipTextForHeader:function(t){var e=this.questionDataForCategory(t);return e.question},questionDataForCategory:function(t){var e=Feedback()._store.props.questions,s=_.find(e,function(e){return e.name==t});return s}});FeedbackData=React.createFactory(FeedbackData);var Gateway=React.createClass({displayName:"Gateway",propTypes:{course:React.PropTypes.object.isRequired,user:React.PropTypes.object.isRequired,CSRFTOKEN:React.PropTypes.string.isRequired},componentDidMount:function(){this.props.router.on("courses/:id",this.setLesson.bind(null,null)),this.props.router.on("courses/:id/lessons",this.setLesson.bind(null,null)),this.props.router.on("courses/:id/students",this.setActive.bind(null,"students")),this.props.router.on("courses/:id/attendances",this.setActive.bind(null,"attendances")),this.props.router.on("courses/:id/calendar",this.setActive.bind(null,"calendar")),this.props.router.on("courses/:id/website",this.setActive.bind(null,"website")),this.props.router.on("lessons/:id",this.setLesson),this.props.router.init()},getInitialState:function(){return{}},TabsDictionary:{lessons:{key:"lessons",name:"Lessons",content:function(){return Lessons},async:function(t,e){t({status:"success",lessons:e.course.lessons})}},calendar:{key:"calendar",name:"Calendar",content:function(){return Calendar},async:function(t,e){t({status:"success",embed_url:e.course.calendar_embed})}},students:{key:"students",name:"Members",content:function(){return Members},endpoint:function(t){return t.course.url+"/students"}},attendances:{key:"attendances",name:"Attendance",content:function(){return Attendances},endpoint:function(t){return t.course.url+"/attendances"}},website:{key:"website",name:"My Website",content:function(){return Website},async:function(t,e){t({status:"success",user:e.user})}}},render:function(){var t,e,s={};for(var n in this.TabsDictionary)s[n]=this.TabsDictionary[n].name;return t=Tabs(_.extend({active:this.state.active,tabNames:s},this.props)),this.state.active&&(e=Primary(_.extend({},this.props,_.omit(this.state,"active"),{tab:this.TabsDictionary[this.state.active],response:this.state.response,handleResponse:this.handleResponse,updateResponse:this.updateResponse}))),React.DOM.div(null,t,e)},handleResponse:function(t){this.setState({response:t})},updateResponse:function(t){this.setState({response:_.extend({},this.state.response,t)})},setActive:function(t){this.setState({active:t,response:null})},setLesson:function(t){var e=t?_.findWhere(this.props.course.lessons,{id:t}):this.props.bootStrappedLesson;this.setState({active:"lessons",lesson:e})}});Gateway=React.createFactory(Gateway);var Lesson=React.createClass({displayName:"Lesson",componentWillMount:function(){this.setActive("materials")},getDefaultProps:function(){return{lesson:{}}},render:function(){var t,e=[],s=[];switch(t=React.DOM.h3(null,React.DOM.a({href:"/lessons/"+this.props.lesson.id},"Lesson "+this.props.lesson.lesson+" "+this.props.lesson.date_human)),s={materials:{key:"materials",name:"Materials",content:function(){return Materials},endpoint:function(t){return"/lessons/"+t.lesson.id+"/materials"}},feedback:{key:"feedback",name:"My Feedback",content:function(){return Feedback},endpoint:function(t){return"/students/"+t.user.id+"/lessons/"+t.lesson.id+"/feedback"}},feedbacks:{key:"feedbacks",name:"Feedback Data",content:function(){return FeedbackData},endpoint:function(t){return"/lessons/"+t.lesson.id+"/feedbacks"}},attendances:{key:"attendances",name:"Attendance",content:function(){return Attendance},endpoint:function(t){return"/lessons/"+t.lesson.id+"/attendances"}}},e.push("materials"),this.props.user.type){case"Student":e.push("feedback");break;case"Teacher":e.push("feedbacks","attendances")}return React.DOM.div(null,t,this.renderTabs(e,s))},renderTabs:function(t,e){var s,n=[];if(t.forEach(function(t){var s=e[t];n.push(React.DOM.li({key:t,className:this.props.active===t?"active":null,onClick:this.setActive.bind(this,t)},s.name))},this),this.props.response){var i=e[this.props.active];s=AsyncLoader(_.extend(i,{key:i.key+"-sub",props:this.props,handleResponse:this.handleNestedResponse,response:this.props.response,loading:StatusMessage.loading,error:StatusMessage.error}))}return React.DOM.div(null,React.DOM.ul({className:"tabs"},n),React.DOM.div({className:"tabs-content"},s))},handleNestedResponse:function(t){this.props.updateResponse({response:t})},updateResponse:function(t){this.props.updateResponse({response:_.extend({},this.props.response,t)})},setActive:function(t){this.props.updateResponse({response:{status:"loading"},active:t})}});Lesson=React.createFactory(Lesson);var Lessons=React.createClass({displayName:"Lessons",mixins:[ContentMixin],getDefaultProps:function(){return{lessons:[],navOpen:!0}},render:function(){var t,e,s,n,i;return n=React.DOM.svg({className:"navToggler",viewBox:"5.0 -10.0 100 120",onClick:this.toggle},React.DOM.polygon({points:"53.75,10 93.375,50 53,90 53,70 73.75,50 53.875,30"}),React.DOM.polygon({points:"18.75,10 58.375,50 18,90 18,70 38.75,50 18.875,30"})),this.props.lesson&&(i=Lesson(_.extend({key:this.props.lesson.id},this.props))),e=React.DOM.div({id:"lesson-wrap"},n,i),s=this.props.lessons.map(function(t,e){var s,n;return this.props.lesson&&t.id===this.props.lesson.id&&(s="active",n=React.DOM.svg({viewBox:"5.0 -10.0 90 125"},React.DOM.path({d:"M79.674,53.719c2.59-2.046,2.59-5.392,0-7.437L22.566,1.053C19.977-0.993,18,0.035,18,3.335v93.331    c0,3.3,1.977,4.326,4.566,2.281L79.674,53.719z"}))),React.DOM.li({key:t.id,className:s,onClick:this.loadLesson.bind(this,e)},n,React.DOM.span(null,t.lesson+" - "),t.date_human)},this),t=React.DOM.ul(null,s),this.wrapContent(e,t)},loadLesson:function(t){this.props.lessons[t]&&this.props.router.setRoute(this.props.lessons[t].url)},toggle:function(){this.props.updateResponse({navOpen:!this.props.navOpen})}});Lessons=React.createFactory(Lessons);var Materials=React.createClass({displayName:"Materials",getDefaultProps:function(){return{materials:{}}},render:function(){var t,e;return t=this.props.materials.contents?this.props.materials.contents.map(function(t){return React.DOM.li({key:t.path},React.DOM.img({src:"https://s3.amazonaws.com/makeist.com/app/dropbox-api-icons/48x48/"+t.icon+"48.gif"}),React.DOM.span(null,t.path),t.bytes?React.DOM.i(null,t.size):null,React.DOM.a({href:t.dl,target:"_blank"},"download"))},this):React.DOM.li(null,"No files found"),e=this.props.materials.dl?React.DOM.a({href:this.props.materials.dl,target:"_blank",className:"button"},"download all"):null,React.DOM.div({className:"materials-wrap"},React.DOM.h4(null,this.props.materials.path,e),React.DOM.ul(null,t))}});Materials=React.createFactory(Materials);var Members=React.createClass({displayName:"Members",mixins:[ContentMixin],getDefaultProps:function(){return{students:[]}},render:function(){var t,e;return e=this.props.students.map(function(t){return React.DOM.div({key:t.id},React.DOM.img({src:t.avatar}),React.DOM.input({value:t.name}))},this),t=React.DOM.div(null,React.DOM.h3(null,this.props.students.length+" Total Members"),React.DOM.div({className:"members-wrap"},e)),this.wrapContent(t)}});Members=React.createFactory(Members);var Primary=React.createClass({displayName:"Primary",mixins:[ContentMixin],render:function(){var t,e;return e=this.wrapContent,t=_.extend({},this.props.tab,{key:this.props.tab.key,response:this.props.response,props:_.omit(this.props,"response"),handleResponse:this.props.handleResponse,loading:function(){return e(StatusMessage.loading())},error:function(t){return e(StatusMessage.error(t))}}),AsyncLoader(t)}});Primary=React.createFactory(Primary);var Site=React.createClass({displayName:"Site",mixins:[ContentMixin],getDefaultProps:function(){return{pending:!1,bucketName:"narly.io",defaultDomain:"http://fewd-24-john-simmons.s3-website-us-east-1.amazonaws.com",customDomain:"http://narly.io",redirects:["http://www.narly.io"],files:[{name:"index.html",size:"128kb","content-type":"text/html","cache-control":"no-cache","last modified":"Mon Oct 29 GMT"},{name:"app.js",size:"128kb","content-type":"application/javascript","cache-control":"no-cache","last modified":"Mon Oct 29 GMT"}]}},render:function(){console.log(this.props);var t,e,s=[],n="";this.props.content&&(s=this.props.content.site.files,n=this.props.content.site.path,e="error"===this.props.loaded?StatusMessage.error(this.props.content):React.DOM.div({className:"success"},"Success! Your website has been published to: ",React.DOM.a({href:this.props.content.endpoint,target:"_blank"},this.props.content.endpoint)));var i,o=[{name:"default domain",domain:this.props.defaultDomain},{name:"custom domain",domain:this.props.customDomain},{name:"redirect domain",domain:this.props.redirects[0]}];i=o.map(function(t){return React.DOM.tr(null,React.DOM.td(null,t.name),React.DOM.td(null,React.DOM.a({className:"website-link",href:t.domain,target:"_blank"},t.domain)))});var r=[],a=[],h=["name","content_length","content_type","cache_control","last_modified"];r=h.map(function(t){return React.DOM.th(null,t)}),a=s.map(function(t){return React.DOM.tr(null,h.map(function(e){var s;return s="name"===e?t.name.replace(new RegExp("^"+n),""):t[e],"name"===e&&"folder"===t.type?React.DOM.td(null,React.DOM.a({href:"?path="+t.name,onClick:this.handleClick.bind(this,t.name)},s)):React.DOM.td(null,s)},this))},this);var c=[],p=_.compact(n.split("/"));c=p.map(function(t){var e=p.indexOf(t),s=p.slice(0,e+1).join("/");return React.DOM.a({href:"?path="+s,onClick:this.handleClick.bind(this,s)},t)},this),c.unshift(React.DOM.a({href:"?path=/",onClick:this.handleClick.bind(this,"/")},"Base"));var l=React.DOM.div({id:"drop-interface",onDrop:function(t){return t.preventDefault(),console.log("dropped!"),!1}});return t=React.DOM.div({className:"site-wrap"},React.DOM.h3(null,this.props.bucketName),React.DOM.table({className:"domains"},React.DOM.tbody(null,i)),React.DOM.h3(null,"Files"),React.DOM.div({className:"breadcrumbs"},c),React.DOM.table({className:"files"},React.DOM.thead(null,React.DOM.tr(null,r)),React.DOM.tbody(null,a)),React.DOM.h3(null,"Upload"),l),this.wrapContent(t)},handleClick:function(t,e){e.preventDefault();var s=this.props.updateResponse;$.ajax({type:"GET",url:"/website?path="+t,data:{authenticity_token:this.props.CSRFTOKEN},dataType:"JSON"}).done(function(t){s({pending:!1,content:t})}).error(function(t){var e={status:t.status,error:t.statusText};t.responseJSON&&(e.error=t.responseJSON.error),s({pending:!1,loaded:"error",content:e})})}});Site=React.createFactory(Site);var Tabs=React.createClass({displayName:"Tabs",getDefaultProps:function(){return{tabNames:[],course:{},user:{}}},render:function(){var t=[],e=[];return t.push("lessons"),this.props.course.calendar_embed&&t.push("calendar"),t.push("students","attendances","website"),t.forEach(function(t){e.push(React.DOM.li({key:t,className:this.props.active===t?"active":null,onClick:this.navigate.bind(this,t)},this.props.tabNames[t]))},this),React.DOM.div({className:"primary-navigation"},React.DOM.div({id:"heading"},React.DOM.a({href:"/"},this.props.course.name)),React.DOM.ul({className:"nav-tabs"},e))},navigate:function(t){var e=this.props.course.url+"/"+t;this.props.router.setRoute(e)}});Tabs=React.createFactory(Tabs);var Website=React.createClass({displayName:"Website",mixins:[ContentMixin],getDefaultProps:function(){return{pending:!1}},render:function(){var t,e,s;return e=React.DOM.div({className:this.props.pending?"submit-wrap disabled":"submit-wrap"},React.DOM.button({onClick:this.handleSubmit,disabled:this.props.pending},"Publish"),this.props.pending?StatusMessage.loading():null,React.DOM.span({className:"pending"},"Patience, this may take a while...")),this.props.content&&(s="error"===this.props.loaded?StatusMessage.error(this.props.content):React.DOM.div({className:"success"},"Success! Your website has been published to: ",React.DOM.a({href:this.props.content.endpoint,target:"_blank"},this.props.content.endpoint))),t=React.DOM.div({className:"website-wrap"},React.DOM.h3(null,"My Website"),React.DOM.div(null,React.DOM.a({className:"website-link",href:this.props.user.website,target:"_blank"},this.props.user.website)),React.DOM.div({className:"info"},"Place all website files in: ",React.DOM.span({className:"path"},"Dropbox/Apps/makeist/website"),React.DOM.p(null,"Ensure Dropbox is runnning and that it finishes syncing whenever you add files."," Now you're ready to hit publish!")),e,s),this.wrapContent(t)},handleSubmit:function(){var t=this.props.updateResponse;t({pending:!0,content:null}),$.ajax({type:"PUT",url:"/users/"+this.props.user.id+"/website",data:{authenticity_token:this.props.CSRFTOKEN},dataType:"JSON"}).done(function(e){t({pending:!1,content:e})}).error(function(e){var s={status:e.status,error:e.statusText};e.responseJSON&&(s.error=e.responseJSON.error),t({pending:!1,loaded:"error",content:s})})}});Website=React.createFactory(Website);